language: node_js
node_js:
- "4.3.2"
before_install:
- openssl aes-256-cbc -K $encrypted_6fe224c112de_key -iv $encrypted_6fe224c112de_iv -in config.js.travis.enc -out config.js -d
- openssl aes-256-cbc -K $encrypted_2e9696b0f841_key -iv $encrypted_2e9696b0f841_iv -in test/config.yml.travis.enc -out test/config.yml -d
- sudo apt-get -qq update
- sudo apt-get install wget vim git man python-setuptools lsof unzip inkscape imagemagick ruby ruby-dev libnss3 libnss3-dev xvfb libnss3-1d x11vnc libexif-dev curl build-essential libssl-dev -y
- wget --no-check-certificate -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
- sudo echo 'deb http://dl.google.com/linux/chrome/deb/ stable main' >> /etc/apt/sources.list.d/google-chrome.list
- sudo apt-get -qq update
- sudo apt-get install google-chrome-stable -y
- wget http://chromedriver.storage.googleapis.com/2.10/chromedriver_linux64.zip
- unzip chromedriver_linux64.zip
- sudo mv chromedriver /usr/local/bin
- sudo chmod a+x /usr/local/bin/chromedriver
- export DISPLAY=:99.0
- sudo /etc/init.d/xvfb start
- chromedriver &
- google-chrome --no-sandbox &
before_script:
- sleep 10
- npm install
- npm run build
- npm run publish &
script: npm run test
# add Slack here
