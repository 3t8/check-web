sudo: required  
dist: trusty
language: node_js
node_js:
- "4.3.2"
before_install:
# config files
- openssl aes-256-cbc -K $encrypted_6fe224c112de_key -iv $encrypted_6fe224c112de_iv -in config.js.travis.enc -out config.js -d
- openssl aes-256-cbc -K $encrypted_2e9696b0f841_key -iv $encrypted_2e9696b0f841_iv -in test/config.yml.travis.enc -out test/config.yml -d
# apt dependencies
- sudo apt-get -qq update
- sudo apt-get install wget python-setuptools lsof unzip inkscape imagemagick ruby ruby-dev libnss3 libnss3-dev xvfb libnss3-1d libexif-dev curl build-essential libssl-dev libappindicator1 fonts-liberation -y
# xvfb
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
# google chrome
- export CHROME_BIN=/usr/bin/google-chrome
- sudo apt-get -qq update
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb
- google-chrome --no-sandbox &
# chromedriver
- wget http://chromedriver.storage.googleapis.com/2.10/chromedriver_linux64.zip
- unzip chromedriver_linux64.zip
- sudo mv chromedriver /usr/local/bin
- sudo chmod a+x /usr/local/bin/chromedriver
- chromedriver &
# ruby / bundler / rspec
- gem install bundler
- cd test && bundle install && cd -
before_script:
- sleep 5
- npm install
- npm run build
- npm run publish &
- sleep 5
script: npm run test
# add Slack here
